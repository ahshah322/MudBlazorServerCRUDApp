@page "/MultiColumnDropdown3"

@using MudBlazor
@using System.Linq

@inject IDialogService DialogService

<MudSelect T="Student" @bind-Value="SelectedStudent" Label="Select Student" MultiSelection="false">
    <ChildContent>
        <MudDataGrid MultiSelection="true" T="Student" Items="@FilteredStudents" RowClick="RowClick">
            <Columns>
                <PropertyColumn Property="x => x.Id" Title="ID" />
                <PropertyColumn Property="x => x.Name" Title="Name" />
                <PropertyColumn Property="x => x.Email" Title="Email" />
                <PropertyColumn Property="x => x.Marks" Title="Marks" />
                <PropertyColumn Property="x => x.DateOfBirth" Title="Date Of Birth" />
            </Columns>
        </MudDataGrid>
    </ChildContent>
</MudSelect>

<MudTextField T="string" Label="Filter by Name" @bind-Value="NameFilter" Immediate="true" />
<MudTextField T="string" Label="Filter by Email" @bind-Value="EmailFilter" Immediate="true" />
<MudTextField T="int" Label="Filter by Marks" @bind-Value="MarksFilter" Immediate="true" />

@code {
    private Student SelectedStudent { get; set; }
    private string NameFilter { get; set; } = string.Empty;
    private string EmailFilter { get; set; } = string.Empty;
    private int MarksFilter { get; set; } = 0;

    private List<Student> Students = new List<Student>
    {
        new Student { Id = 1, Name = "Alice", Email = "alice@example.com", Marks = 85, DateOfBirth = new DateTime(2001, 1, 1) },
        new Student { Id = 2, Name = "Bob", Email = "bob@example.com", Marks = 90, DateOfBirth = new DateTime(2000, 2, 2) },
        new Student { Id = 3, Name = "Charlie", Email = "charlie@example.com", Marks = 95, DateOfBirth = new DateTime(1999, 3, 3) }
    };

    private IEnumerable<Student> FilteredStudents => Students
        .Where(x => string.IsNullOrEmpty(NameFilter) || x.Name.Contains(NameFilter, StringComparison.OrdinalIgnoreCase))
        .Where(x => string.IsNullOrEmpty(EmailFilter) || x.Email.Contains(EmailFilter, StringComparison.OrdinalIgnoreCase))
        .Where(x => x.Marks == MarksFilter);

    private void RowClick(DataGridRowClickEventArgs<Student> args)
    {
        SelectedStudent = args.Item;
    }
}
